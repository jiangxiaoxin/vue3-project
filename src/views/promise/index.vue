<template>
  <p>
    getDataçš„thené‡Œå»å‘èµ·æ–°çš„è¯·æ±‚ getData2å’Œ getData3ï¼ŒgetData2å’Œ
    getData3çš„æ‰§è¡Œä¸ä¼šå½±å“getDataè‡ªå·±çš„finallyçš„æ‰§è¡Œï¼ŒgetData2å’Œ getData3å¦‚æœå‘ç”Ÿerrorï¼Œä¹Ÿä¸ä¼šè¢«
    getDataçš„catchæ‹¦æˆªã€‚å¦‚æœ getData2å’Œ getData3å¤±è´¥ï¼Œåªèƒ½ç”±ä»–ä»¬è‡ªå·±çš„catchå»å¤„ç†
  </p>
  <p>å¯ä»¥å°†thené‡Œé¢é‡æ–°å‘èµ·çš„promise returnå‡ºæ¥ï¼Œè¿™æ ·å°±åŠ å…¥åˆ°å¤–éƒ¨çš„æ•´ä¸ªpromise é“¾ä¸Š</p>
</template>

<script setup lang="ts">
import { onMounted } from 'vue'

const getData = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(123)
    }, 1000)
  })
}

const getData2 = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      reject(456)
    }, 2000)
  })
}

const getData3 = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(789)
    }, 3000)
  })
}

onMounted(() => {
  getData()
    .then((res) => {
      console.log('ğŸš€ ~ index.vue:31 ~ getData ~ res:', res)

      getData2()
        .then((res) => {
          console.log('2222 data', res)
        })
        .catch((err) => {
          console.log('errr 222', err)
        })
        .finally(() => {
          console.log('finally 222')
        })
      getData3().then((res) => {
        console.log('333 data', res)
      })
    })
    .catch((err) => {
      console.log('1111', err)
    })
    .finally(() => {
      console.log('finally 1111')
    })
})
</script>
